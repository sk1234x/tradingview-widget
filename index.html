<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsive TradingView Grid</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        .controls {
            margin-bottom: 20px;
        }

        .checkbox-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .checkbox-item {
            display: inline-block;
            white-space: nowrap;
        }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 10px;
        }

        .tradingview-widget-container {
            position: relative;
            width: 100%;
            padding-bottom: 66.67%; /* Aspect ratio of 1.5x1 */
            height: 0;
        }

        .tradingview-widget-container__widget {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .input-box, .interval-box {
            margin-top: 15px;
        }

        @media (max-width: 768px) {
            .grid-container {
                grid-template-columns: repeat(auto-fit, minmax(100%, 1fr));
            }

            .checkbox-list {
                flex-direction: column;
            }

            .input-box, .interval-box {
                margin-top: 10px;
            }
        }
    </style>
</head>
<body>

<h1>TradingView Grid with Selectable Symbols</h1>

<div class="controls">
    <h3>Select Symbols to Display:</h3>
    <div class="checkbox-list">
        <label class="checkbox-item"><input type="checkbox" class="symbol-checkbox" value="MEXC:BTCUSDT.P" checked> MEXC:BTCUSDT.P</label>
        <label class="checkbox-item"><input type="checkbox" class="symbol-checkbox" value="MEXC:ETHUSDT.P"> MEXC:ETHUSDT.P</label>
        <label class="checkbox-item"><input type="checkbox" class="symbol-checkbox" value="MEXC:BNBUSDT.P"> MEXC:BNBUSDT.P</label>
        <label class="checkbox-item"><input type="checkbox" class="symbol-checkbox" value="MEXC:SOLUSDT.P"> MEXC:SOLUSDT.P</label>
        <label class="checkbox-item"><input type="checkbox" class="symbol-checkbox" value="MEXC:XRPUSDT.P"> MEXC:XRPUSDT.P</label>
        <label class="checkbox-item"><input type="checkbox" class="symbol-checkbox" value="MEXC:FTMUSDT.P"> MEXC:FTMUSDT.P</label>
        <label class="checkbox-item"><input type="checkbox" class="symbol-checkbox" value="MEXC:FETUSDT.P"> MEXC:FETUSDT.P</label>
    </div>

    <div class="input-box">
        <h3>Enter Additional Symbols (Comma Separated):</h3>
        <input type="text" id="symbolInput" placeholder="e.g., MEXC:DOGEUSDT.P, MEXC:SHIBUSDT.P" style="width: 100%; padding: 8px;">
    </div>

    <div class="interval-box">
        <h3>Set Global Interval:</h3>
        <input type="text" id="intervalInput" placeholder="e.g., 1, 5, 15, 60, D, W, M" style="width: 100%; padding: 8px;">
        <small>Available values: 1 (1 min), 5 (5 mins), 15 (15 mins), 60 (1 hour), D (daily), W (weekly), M (monthly)</small>
    </div>
</div>

<div class="grid-container" id="chartGrid"></div>

<script>
    // Predefined symbols and default selection
    const symbols = [
        "MEXC:BTCUSDT.P",
        "MEXC:ETHUSDT.P",
        "MEXC:BNBUSDT.P",
        "MEXC:SOLUSDT.P",
        "MEXC:XRPUSDT.P",
        "MEXC:FTMUSDT.P",
        "MEXC:FETUSDT.P"
    ];
    const defaultSymbols = ["MEXC:BTCUSDT.P"];
    let globalInterval = "D"; // Default interval

    // DOM references
    const chartGrid = document.getElementById("chartGrid");
    const checkboxes = document.querySelectorAll(".symbol-checkbox");
    const symbolInput = document.getElementById("symbolInput");
    const intervalInput = document.getElementById("intervalInput");

    // Function to render charts
    function renderCharts(selectedSymbols) {
        chartGrid.innerHTML = ""; // Clear existing charts
        selectedSymbols.forEach(symbol => {
            const chartContainer = document.createElement("div");
            chartContainer.className = "tradingview-widget-container";
            const widgetScript = document.createElement("script");
            widgetScript.type = "text/javascript";
            widgetScript.async = true;
            widgetScript.src = "https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js";
            widgetScript.innerHTML = JSON.stringify({
                autosize: true,
                symbol: symbol,
                interval: globalInterval,
                timezone: "Asia/Kolkata",
                theme: "light",
                style: "1",
                locale: "en",
                allow_symbol_change: true,
                calendar: false
            });
            chartContainer.appendChild(widgetScript);
            chartGrid.appendChild(chartContainer);
        });
    }

    // Event listener for checkbox changes
    checkboxes.forEach(checkbox => {
        checkbox.addEventListener("change", updateCharts);
    });

    // Event listener for input box
    symbolInput.addEventListener("input", updateCharts);

    // Event listener for interval input box
    intervalInput.addEventListener("input", () => {
        const newInterval = intervalInput.value.trim();
        if (newInterval.length > 0) {
            globalInterval = newInterval; // Update global interval
            updateCharts();
        }
    });

    // Function to update charts based on selected checkboxes and input box
    function updateCharts() {
        const selectedSymbolsFromCheckboxes = Array.from(checkboxes)
            .filter(cb => cb.checked)
            .map(cb => cb.value);

        const additionalSymbols = symbolInput.value
            .split(",")
            .map(symbol => symbol.trim())
            .filter(symbol => symbol.length > 0);

        const allSelectedSymbols = [...selectedSymbolsFromCheckboxes, ...additionalSymbols];
        renderCharts(allSelectedSymbols);
    }

    // Initialize with default symbols
    renderCharts(defaultSymbols);
</script>

</body>
</html>
