<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TradingView 3x3 Grid with Checkboxes</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        .controls {
            margin-bottom: 20px;
        }

        .grid-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-auto-rows: auto;
            gap: 10px;
        }

        .tradingview-widget-container {
            position: relative;
            width: 100%;
            padding-bottom: 66.67%; /* Aspect ratio of 1.5x1 */
            height: 0;
        }

        .tradingview-widget-container__widget {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .checkbox-list {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
    </style>
</head>
<body>

<h1>TradingView Grid with Selectable Symbols</h1>

<div class="controls">
    <h3>Select Symbols to Display:</h3>
    <div class="checkbox-list">
        <label><input type="checkbox" class="symbol-checkbox" value="MEXC:BTCUSDT.P" checked> MEXC:BTCUSDT.P</label>
        <label><input type="checkbox" class="symbol-checkbox" value="MEXC:ETHUSDT.P"> MEXC:ETHUSDT.P</label>
        <label><input type="checkbox" class="symbol-checkbox" value="MEXC:BNBUSDT.P"> MEXC:BNBUSDT.P</label>
        <label><input type="checkbox" class="symbol-checkbox" value="MEXC:SOLUSDT.P"> MEXC:SOLUSDT.P</label>
        <label><input type="checkbox" class="symbol-checkbox" value="MEXC:XRPUSDT.P"> MEXC:XRPUSDT.P</label>
        <label><input type="checkbox" class="symbol-checkbox" value="MEXC:FTMUSDT.P"> MEXC:FTMUSDT.P</label>
        <label><input type="checkbox" class="symbol-checkbox" value="MEXC:FETUSDT.P"> MEXC:FETUSDT.P</label>
    </div>
</div>

<div class="grid-container" id="chartGrid"></div>

<script>
    // Predefined symbols and default selection
    const symbols = [
        "MEXC:BTCUSDT.P",
        "MEXC:ETHUSDT.P",
        "MEXC:BNBUSDT.P",
        "MEXC:SOLUSDT.P",
        "MEXC:XRPUSDT.P",
        "MEXC:FTMUSDT.P",
        "MEXC:FETUSDT.P"
    ];
    const defaultSymbols = ["MEXC:BTCUSDT.P"];

    // DOM references
    const chartGrid = document.getElementById("chartGrid");
    const checkboxes = document.querySelectorAll(".symbol-checkbox");

    // Function to render charts
    function renderCharts(selectedSymbols) {
        chartGrid.innerHTML = ""; // Clear existing charts
        selectedSymbols.forEach(symbol => {
            const chartContainer = document.createElement("div");
            chartContainer.className = "tradingview-widget-container";
            chartContainer.innerHTML = `
                <div class="tradingview-widget-container__widget"></div>
                <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
                {
                    "autosize": true,
                    "symbol": "${symbol}",
                    "interval": "D",
                    "timezone": "Etc/UTC",
                    "theme": "light",
                    "style": "1",
                    "locale": "en",
                    "allow_symbol_change": true,
                    "calendar": false,
                    "support_host": "https://www.tradingview.com"
                }
                </script>
            `;
            chartGrid.appendChild(chartContainer);
        });
    }

    // Initialize with default symbols
    renderCharts(defaultSymbols);

    // Event listener for checkbox changes
    checkboxes.forEach(checkbox => {
        checkbox.addEventListener("change", () => {
            const selectedSymbols = Array.from(checkboxes)
                .filter(cb => cb.checked)
                .map(cb => cb.value);
            renderCharts(selectedSymbols);
        });
    });
</script>

</body>
</html>
